---

- homebrew:
    name: dockutil
    state: present
  become: false
  ignore_errors: true

- name: wipe
  shell: dockutil --remove "{{ item }}"
  with_items: "{{dockitems_to_remove}}"
  become: false
  ignore_errors: true

- name: wipe defaults
  shell: dockutil --remove "{{ item }}"
  with_items: "{{default_dockitems_to_remove}}"
  become: false
  ignore_errors: true

- name: if item exists, add to dock
  shell: dockutil --find "{{ item.name }}" || dockutil --add "{{ item.path }}"
  with_items: "{{dockitems_to_persist}}"
  become: false
  ignore_errors: true

- name: fix order
  shell: dockutil --move "{{ item.name }}" --position {{ item.pos }}
  with_items: "{{dockitems_to_persist}}"
  become: false
  ignore_errors: true
